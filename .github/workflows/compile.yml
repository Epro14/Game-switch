name: Build Switch App
on: [push]
jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Setup devkitPro
        # Questa azione installa tutto il necessario automaticamente
        uses: devkitPro/setup-devkitpro@v1
        with:
          dkp-packages: |
            switch-dev
            switch-sdl2
            switch-sdl2-image
            switch-libpng
            switch-zlib

      - name: Build Game
        run: |
          # Diciamo al sistema dove sono i compilatori
          export DEVKITPRO=/opt/devkitpro
          export PATH=$DEVKITPRO/devkitARM/bin:$PATH
          make

      - name: Upload Result
        uses: actions/upload-artifact@v4
        with:
          name: StarClash-Game
          path: ./*.nro
